<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <title>ScriptTownn - Cidade</title>
  
  <!-- Estilos -->
  <link rel="stylesheet" href="../css/geral.css">
  <link rel="stylesheet" href="../css/cidade.css">
</head>
<body>
  <!-- Background fullscreen -->
  <div id="background"></div>
  
  <!-- Container principal -->
  <div id="game-container">
    <!-- Controle de volume -->
    <div id="volume-control">
      <span id="volume-icon">ðŸ”Š</span>
      <input type="range" id="volume-slider" class="game-volume-slider" min="0" max="100" value="25">
      <span id="volume-value">25%</span>
    </div>
    
    <!-- Info box permanente (apenas em cidade) -->
    <div id="info-box">
      <div class="intro-text">
       Hello there! Welcome to my site!<br>
        My name is Vitor Barbosa.<br>
        I'm a Software Engineering MSc student at ISCTE.<br>
        Hope you enjoy your stay here!
      </div>
      <br>
      <div class="links-row">
        <a href="https://www.linkedin.com/in/vitorsantosbarbosa/" target="_blank">ðŸ‘¤ LinkedIn</a>
        <a href="https://bonviniv.github.io/projects.html" target="_blank">ðŸ’¼ Other Projects</a>
      </div>
      <div class="download-container">
        <a href="../../outros/VitorBarbosaCV.pdf" download="VitorBarbosaCV.pdf" class="download-btn">ðŸ’¾ Download CV</a>
      </div>
    </div>
    
    <!-- Container do mapa -->
    <div id="map-container">
      <!-- Mapa serÃ¡ inserido aqui via JS -->
      <!-- Personagem serÃ¡ inserido aqui via JS -->
      <!-- Debug overlay -->
      <div id="debug-overlay" class="hidden">
        <!-- Grid de debug serÃ¡ inserida via JS -->
      </div>
    </div>
    
    <!-- Caixa de diÃ¡logo -->
    <div id="dialog-box" class="hidden">
      <!-- Texto serÃ¡ inserido via JS -->
    </div>
    
    <!-- Caixa de instruÃ§Ã£o -->
    <div id="instruction-box">
      Use WASD to move
    </div>
    
    <!-- Controles mobile -->
    <div id="mobile-controls" class="hidden">
      <button class="mobile-btn" data-direction="UP">â–²</button>
      <button class="mobile-btn" data-direction="LEFT">â—„</button>
      <button class="mobile-btn" data-direction="DOWN">â–¼</button>
      <button class="mobile-btn" data-direction="RIGHT">â–º</button>
    </div>
    
    <!-- Loading screen -->
    <div id="loading-screen">
      <p id="loading-text">Carregando mapa...</p>
      <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
      </div>
    </div>
    
    <!-- Debug info (outside map-container) -->
    <div id="debug-info" class="hidden"></div>
    
    <!-- Aviso de orientaÃ§Ã£o (mobile portrait) -->
    <div id="rotate-message">
      <div id="rotate-icon">ðŸ“± â†»</div>
      <p id="rotate-text">Por favor, vire seu dispositivo para modo paisagem (horizontal)</p>
    </div>
    
    <!-- Mensagem de erro -->
    <div id="error-message">
      <div id="error-title">Erro</div>
      <div id="error-text"></div>
      <button id="error-reload" onclick="location.reload()">Recarregar</button>
    </div>
  </div>
  
  <!-- Scripts -->
  <script src="../js/constants.js"></script>
  <script src="../js/audio.js"></script>
  <script src="../js/scale.js"></script>
  <script src="../js/mapRenderer.js"></script>
  <script src="../js/player.js"></script>
  <script src="../js/collision.js"></script>
  <script src="../js/triggers.js"></script>
  <script src="../js/controls.js"></script>
  <script src="../js/ui.js"></script>
  <script src="../js/debug.js"></script>
  <script src="../js/game.js"></script>
  
  <!-- Script de controle da caixa de instruÃ§Ã£o -->
  <script>
    (function() {
      const instructionBox = document.getElementById('instruction-box');
      let hasMovedOnce = false;
      
      // Verificar movimento do jogador
      const originalMove = PlayerSystem.move;
      PlayerSystem.move = function(direction) {
        const result = originalMove.call(this, direction);
        
        // Se o movimento foi bem-sucedido e Ã© o primeiro movimento
        if (result && !hasMovedOnce) {
          hasMovedOnce = true;
          // Esconder a caixa de instruÃ§Ã£o
          if (instructionBox) {
            instructionBox.classList.add('hidden');
          }
        }
        
        return result;
      };
    })();
  </script>
</body>
</html>
